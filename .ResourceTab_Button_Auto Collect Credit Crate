local a=game:GetService"Players"
local b=game:GetService"RunService"

local c=a.LocalPlayer
local d=workspace.CurrentCamera

local e=c.CameraMaxZoomDistance
local f=d.CameraType

c.CameraMaxZoomDistance=0.5

local g=c.Character or c.CharacterAdded:Wait()
local h=g:WaitForChild"Humanoid"
local i=g:WaitForChild"HumanoidRootPart"
local j=c:WaitForChild"Backpack"

local k="Credit"
local l=CFrame.new(-125,5,-791)

local function getItemCount()
local m=0
for n,o in ipairs(j:GetChildren())do
if o.Name==k then
m+=1
end
end
return m
end

local m={}
for n,o in ipairs(workspace:GetDescendants())do
if o:IsA"Model"and o.Name=="CreditCrate"then
local p=o:FindFirstChild("ProximityHolder",true)
if p then
local q=p:FindFirstChildOfClass"ProximityPrompt"
if q then
table.insert(m,{holder=p,prompt=q})
end
end
end
end

local n

local function aimCameraAt(o)
if n then n:Disconnect()end
d.CameraType=Enum.CameraType.Scriptable
n=b.RenderStepped:Connect(function()
if o and o.Parent then
d.CFrame=CFrame.lookAt(d.CFrame.Position,o.Position)
end
end)
end

local function releaseCamera()
if n then n:Disconnect()n=nil end
d.CameraType=f
end

local function attemptCrate(o)
local p=o.holder
local q=o.prompt
if not p or not q then return end

i.CFrame=p.CFrame+Vector3.new(0,3,0)
task.wait(0.3)

d.CFrame=CFrame.new(i.Position,p.Position)
aimCameraAt(p)

q.HoldDuration=0.1

local r=getItemCount()
local s=false

local t
t=q.Triggered:Connect(function(u)
if u==c then
s=true
end
end)

fireproximityprompt(q,0.5)

local u=os.clock()
while os.clock()-u<1.6 do
if s then break end
if getItemCount()>r then break end
task.wait(0.1)
end

if t then t:Disconnect()end
releaseCamera()
end

h.CameraOffset=Vector3.zero
h.AutoRotate=false

for o,p in ipairs(m)do
attemptCrate(p)
task.wait(0.2)
end

i.CFrame=l

h.AutoRotate=true
c.CameraMaxZoomDistance=e
d.CameraType=f
