-- Aegis Hub GUI - Full Version
-- Modern dark theme with all main tabs

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GUI CUSTOMIZATION SETTINGS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local GUI_SETTINGS = {
    -- Modern Color Scheme (Better colors)
    Background = Color3.fromRGB(12, 12, 20),
    BackgroundSecondary = Color3.fromRGB(18, 18, 28),
    Surface = Color3.fromRGB(24, 24, 36),
    SurfaceHover = Color3.fromRGB(32, 32, 44),
    
    -- Accent Colors (Brighter purple)
    Primary = Color3.fromRGB(147, 51, 234), -- Brighter purple
    PrimaryHover = Color3.fromRGB(168, 85, 247),
    Danger = Color3.fromRGB(239, 68, 68),
    
    -- Text Colors (More contrast)
    TextPrimary = Color3.fromRGB(255, 255, 255),
    TextSecondary = Color3.fromRGB(180, 180, 200),
    TextMuted = Color3.fromRGB(120, 120, 140),
    
    -- Tab Colors
    TabInactive = Color3.fromRGB(30, 30, 42),
    TabActive = Color3.fromRGB(147, 51, 234),
    TabHover = Color3.fromRGB(40, 40, 52),
    
    -- Transparency
    MainTransparency = 0.3, -- More visible transparency
    
    -- Sizes
    WindowWidth = 750,
    WindowHeight = 580,
    SidebarWidth = 200,
    TitleBarHeight = 50,
}

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    RAYFIELD ICONS (Lucide Icons)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local Icons = {
    -- Logo
    CoreXLogo = "rbxassetid://92957924307501",
    
    -- Main Menu Icons
    AegisOptions = "rbxassetid://10723407389",      -- shield
    WastelanderOptions = "rbxassetid://10747374131", -- skull
    PlayerMod = "rbxassetid://10734950309",          -- user
    WorldMod = "rbxassetid://10734952273",           -- globe/world (was wrench, now globe)
    AutoCollect = "rbxassetid://10747372992",        -- package
    WorldTeleports = "rbxassetid://10723434711",     -- map-pin
    Trolling = "rbxassetid://10747374131",           -- skull (as trolling placeholder)
    Utility = "rbxassetid://10734952273",            -- wrench
    
    -- Aegis/Wastelander Sub-tabs
    ESP = "rbxassetid://10747372167",                -- eye
    Hitbox = "rbxassetid://10723415766",             -- target
    Teleport = "rbxassetid://10723434711",           -- map-pin (using same as World Teleports)
    Spectate = "rbxassetid://10747384394",           -- video
}

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CREATE SCREEN GUI
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CoreXGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.DisplayOrder = 999

-- Protection
if gethui then
    ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
    ScreenGui.Parent = game.CoreGui
else
    ScreenGui.Parent = game.CoreGui
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MAIN WINDOW
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, GUI_SETTINGS.WindowWidth, 0, GUI_SETTINGS.WindowHeight)
MainFrame.Position = UDim2.new(0.5, -GUI_SETTINGS.WindowWidth/2, 0.5, -GUI_SETTINGS.WindowHeight/2)
MainFrame.BackgroundColor3 = GUI_SETTINGS.Background
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundTransparency = GUI_SETTINGS.MainTransparency
MainFrame.Parent = ScreenGui

-- Scale animation on open
MainFrame.Size = UDim2.new(0, 0, 0, 0)
TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0, GUI_SETTINGS.WindowWidth, 0, GUI_SETTINGS.WindowHeight)
}):Play()

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Color3.fromRGB(60, 60, 80)
MainStroke.Thickness = 1
MainStroke.Transparency = 0.5
MainStroke.Parent = MainFrame

-- Gradient overlay
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(200, 200, 220))
}
Gradient.Rotation = 45
Gradient.Transparency = NumberSequence.new{
    NumberSequenceKeypoint.new(0, 0.98),
    NumberSequenceKeypoint.new(1, 0.95)
}
Gradient.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, GUI_SETTINGS.TitleBarHeight)
TitleBar.BackgroundColor3 = GUI_SETTINGS.BackgroundSecondary
TitleBar.BackgroundTransparency = 0.1
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

-- Top corner rounding
local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 16)
TitleCorner.Parent = TitleBar

-- Fix bottom of title bar to be square
local TitleFix = Instance.new("Frame")
TitleFix.Size = UDim2.new(1, 0, 0, 16)
TitleFix.Position = UDim2.new(0, 0, 1, -16)
TitleFix.BackgroundColor3 = GUI_SETTINGS.BackgroundSecondary
TitleFix.BackgroundTransparency = 0.1
TitleFix.BorderSizePixel = 0
TitleFix.Parent = TitleBar

-- Title container
local TitleContainer = Instance.new("Frame")
TitleContainer.Size = UDim2.new(1, -100, 1, 0)
TitleContainer.Position = UDim2.new(0, 20, 0, 0)
TitleContainer.BackgroundTransparency = 1
TitleContainer.Parent = TitleBar

-- CoreX Logo Icon (using the asset)
local LogoIcon = Instance.new("ImageLabel")
LogoIcon.Size = UDim2.new(0, 32, 0, 32)
LogoIcon.Position = UDim2.new(0, 0, 0.5, -16)
LogoIcon.BackgroundTransparency = 1
LogoIcon.Image = Icons.CoreXLogo
LogoIcon.Parent = TitleContainer

-- Title
local TitleText = Instance.new("TextLabel")
TitleText.Name = "TitleText"
TitleText.Size = UDim2.new(1, -45, 0, 20)
TitleText.Position = UDim2.new(0, 45, 0, 8)
TitleText.BackgroundTransparency = 1
TitleText.Text = "CoreX"
TitleText.TextColor3 = GUI_SETTINGS.TextPrimary
TitleText.TextSize = 20
TitleText.Font = Enum.Font.GothamBold
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Parent = TitleContainer

-- Subtitle (moved down to not overlap)
local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(1, -45, 0, 12)
Subtitle.Position = UDim2.new(0, 45, 0, 30)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "CAPSLOCK to minimize"
Subtitle.TextColor3 = GUI_SETTINGS.TextSecondary
Subtitle.TextSize = 10
Subtitle.Font = Enum.Font.Gotham
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.Parent = TitleContainer

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 36, 0, 36)
MinimizeButton.Position = UDim2.new(1, -88, 0, 7)
MinimizeButton.BackgroundColor3 = GUI_SETTINGS.Surface
MinimizeButton.Text = ""
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Parent = TitleBar

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

local MinimizeIcon = Instance.new("TextLabel")
MinimizeIcon.Size = UDim2.new(1, 0, 1, 0)
MinimizeIcon.BackgroundTransparency = 1
MinimizeIcon.Text = "âˆ’"
MinimizeIcon.TextColor3 = GUI_SETTINGS.TextSecondary
MinimizeIcon.TextSize = 22
MinimizeIcon.Font = Enum.Font.GothamBold
MinimizeIcon.Parent = MinimizeButton

MinimizeButton.MouseEnter:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.SurfaceHover}):Play()
    TweenService:Create(MinimizeIcon, TweenInfo.new(0.2), {TextColor3 = GUI_SETTINGS.TextPrimary}):Play()
end)

MinimizeButton.MouseLeave:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.Surface}):Play()
    TweenService:Create(MinimizeIcon, TweenInfo.new(0.2), {TextColor3 = GUI_SETTINGS.TextSecondary}):Play()
end)

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 36, 0, 36)
CloseButton.Position = UDim2.new(1, -46, 0, 7)
CloseButton.BackgroundColor3 = GUI_SETTINGS.Surface
CloseButton.Text = ""
CloseButton.BorderSizePixel = 0
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

local CloseIcon = Instance.new("TextLabel")
CloseIcon.Size = UDim2.new(1, 0, 1, 0)
CloseIcon.BackgroundTransparency = 1
CloseIcon.Text = "Ã—"
CloseIcon.TextColor3 = GUI_SETTINGS.TextSecondary
CloseIcon.TextSize = 22
CloseIcon.Font = Enum.Font.GothamBold
CloseIcon.Parent = CloseButton

CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.Danger}):Play()
    TweenService:Create(CloseIcon, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.Surface}):Play()
    TweenService:Create(CloseIcon, TweenInfo.new(0.2), {TextColor3 = GUI_SETTINGS.TextSecondary}):Play()
end)

-- Minimize state
local isMinimized = false
local originalSize = UDim2.new(0, GUI_SETTINGS.WindowWidth, 0, GUI_SETTINGS.WindowHeight)
local minimizedSize = UDim2.new(0, GUI_SETTINGS.WindowWidth, 0, GUI_SETTINGS.TitleBarHeight)

-- Minimize functionality
MinimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    
    if isMinimized then
        -- Minimize
        TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = minimizedSize
        }):Play()
        Sidebar.Visible = false
        ContentArea.Visible = false
        Divider.Visible = false
        TitleFix.Visible = false -- Hide the title bar fix frame
    else
        -- Expand
        TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = originalSize
        }):Play()
        Sidebar.Visible = true
        ContentArea.Visible = true
        Divider.Visible = true
        TitleFix.Visible = true -- Show the title bar fix frame
    end
end)

-- Close functionality - completely destroy everything
CloseButton.MouseButton1Click:Connect(function()
    TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Size = UDim2.new(0, 0, 0, 0)
    }):Play()
    task.wait(0.3)
    
    -- Destroy the entire GUI
    ScreenGui:Destroy()
    
    -- Clear global table
    _G.AegisHub = nil
    
    print("[CoreX] GUI closed and destroyed")
end)

-- Divider
local Divider = Instance.new("Frame")
Divider.Size = UDim2.new(1, -40, 0, 1)
Divider.Position = UDim2.new(0, 20, 0, GUI_SETTINGS.TitleBarHeight)
Divider.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
Divider.BackgroundTransparency = 0.7
Divider.BorderSizePixel = 0
Divider.Parent = MainFrame

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    SIDEBAR (Main Menu)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local Sidebar = Instance.new("Frame")
Sidebar.Name = "Sidebar"
Sidebar.Size = UDim2.new(0, GUI_SETTINGS.SidebarWidth, 1, -(GUI_SETTINGS.TitleBarHeight + 20))
Sidebar.Position = UDim2.new(0, 10, 0, GUI_SETTINGS.TitleBarHeight + 10)
Sidebar.BackgroundColor3 = GUI_SETTINGS.BackgroundSecondary
Sidebar.BackgroundTransparency = 0.3
Sidebar.BorderSizePixel = 0
Sidebar.Parent = MainFrame

local SidebarCorner = Instance.new("UICorner")
SidebarCorner.CornerRadius = UDim.new(0, 12)
SidebarCorner.Parent = Sidebar

local SidebarStroke = Instance.new("UIStroke")
SidebarStroke.Color = Color3.fromRGB(50, 50, 70)
SidebarStroke.Thickness = 1
SidebarStroke.Transparency = 0.6
SidebarStroke.Parent = Sidebar

-- Sidebar scroll
local SidebarScroll = Instance.new("ScrollingFrame")
SidebarScroll.Size = UDim2.new(1, -16, 1, -16)
SidebarScroll.Position = UDim2.new(0, 8, 0, 8)
SidebarScroll.BackgroundTransparency = 1
SidebarScroll.BorderSizePixel = 0
SidebarScroll.ScrollBarThickness = 4
SidebarScroll.ScrollBarImageColor3 = GUI_SETTINGS.Primary
SidebarScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
SidebarScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
SidebarScroll.Parent = Sidebar

local SidebarLayout = Instance.new("UIListLayout")
SidebarLayout.Padding = UDim.new(0, 6)
SidebarLayout.SortOrder = Enum.SortOrder.LayoutOrder
SidebarLayout.Parent = SidebarScroll

local SidebarPadding = Instance.new("UIPadding")
SidebarPadding.PaddingTop = UDim.new(0, 5)
SidebarPadding.PaddingBottom = UDim.new(0, 5)
SidebarPadding.PaddingLeft = UDim.new(0, 5)
SidebarPadding.PaddingRight = UDim.new(0, 5)
SidebarPadding.Parent = SidebarScroll

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CONTENT AREA
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local ContentArea = Instance.new("Frame")
ContentArea.Name = "ContentArea"
ContentArea.Size = UDim2.new(1, -(GUI_SETTINGS.SidebarWidth + 30), 1, -(GUI_SETTINGS.TitleBarHeight + 20))
ContentArea.Position = UDim2.new(0, GUI_SETTINGS.SidebarWidth + 20, 0, GUI_SETTINGS.TitleBarHeight + 10)
ContentArea.BackgroundColor3 = GUI_SETTINGS.BackgroundSecondary
ContentArea.BackgroundTransparency = 0.3
ContentArea.BorderSizePixel = 0
ContentArea.Parent = MainFrame

local ContentCorner = Instance.new("UICorner")
ContentCorner.CornerRadius = UDim.new(0, 12)
ContentCorner.Parent = ContentArea

local ContentStroke = Instance.new("UIStroke")
ContentStroke.Color = Color3.fromRGB(50, 50, 70)
ContentStroke.Thickness = 1
ContentStroke.Transparency = 0.6
ContentStroke.Parent = ContentArea

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    TAB SYSTEM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local MainPages = {}
local CurrentPage = nil

-- Function to create main menu button
local function CreateMainMenuButton(name, icon, layoutOrder, hasSubTabs)
    local Button = Instance.new("TextButton")
    Button.Name = name .. "Button"
    Button.Size = UDim2.new(1, 0, 0, 42)
    Button.BackgroundColor3 = GUI_SETTINGS.TabInactive
    Button.Text = ""
    Button.BorderSizePixel = 0
    Button.LayoutOrder = layoutOrder
    Button.AutoButtonColor = false
    Button.Parent = SidebarScroll
    
    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 8)
    BtnCorner.Parent = Button
    
    -- Icon
    local Icon = Instance.new("ImageLabel")
    Icon.Size = UDim2.new(0, 20, 0, 20)
    Icon.Position = UDim2.new(0, 10, 0.5, -10)
    Icon.BackgroundTransparency = 1
    Icon.Image = icon
    Icon.ImageColor3 = GUI_SETTINGS.TextSecondary
    Icon.Parent = Button
    
    -- Text
    local Text = Instance.new("TextLabel")
    Text.Size = UDim2.new(1, -40, 1, 0)
    Text.Position = UDim2.new(0, 36, 0, 0)
    Text.BackgroundTransparency = 1
    Text.Text = name
    Text.TextColor3 = GUI_SETTINGS.TextSecondary
    Text.TextSize = 13
    Text.Font = Enum.Font.GothamBold
    Text.TextXAlignment = Enum.TextXAlignment.Left
    Text.TextTruncate = Enum.TextTruncate.AtEnd
    Text.Parent = Button
    
    -- Content page
    local Page = Instance.new("Frame")
    Page.Name = name .. "Page"
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.BackgroundTransparency = 1
    Page.Visible = false
    Page.Parent = ContentArea
    
    MainPages[name] = {
        Button = Button,
        Page = Page,
        Icon = Icon,
        Text = Text,
        HasSubTabs = hasSubTabs or false
    }
    
    Button.MouseButton1Click:Connect(function()
        for pageName, page in pairs(MainPages) do
            TweenService:Create(page.Button, TweenInfo.new(0.3), {BackgroundColor3 = GUI_SETTINGS.TabInactive}):Play()
            TweenService:Create(page.Icon, TweenInfo.new(0.3), {ImageColor3 = GUI_SETTINGS.TextSecondary}):Play()
            TweenService:Create(page.Text, TweenInfo.new(0.3), {TextColor3 = GUI_SETTINGS.TextSecondary}):Play()
            page.Page.Visible = false
        end
        
        TweenService:Create(Button, TweenInfo.new(0.3), {BackgroundColor3 = GUI_SETTINGS.Surface}):Play()
        TweenService:Create(Icon, TweenInfo.new(0.3), {ImageColor3 = GUI_SETTINGS.Primary}):Play()
        TweenService:Create(Text, TweenInfo.new(0.3), {TextColor3 = GUI_SETTINGS.TextPrimary}):Play()
        Page.Visible = true
        CurrentPage = name
    end)
    
    Button.MouseEnter:Connect(function()
        if CurrentPage ~= name then
            TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.TabHover}):Play()
        end
    end)
    
    Button.MouseLeave:Connect(function()
        if CurrentPage ~= name then
            TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.TabInactive}):Play()
        end
    end)
    
    return Page
end

-- Function to create sub-tab page (for Aegis Options and Wastelander Options)
local function CreateSubTabPage(parentPage, tabs)
    -- Tab bar
    local TabBar = Instance.new("Frame")
    TabBar.Size = UDim2.new(1, -30, 0, 45)
    TabBar.Position = UDim2.new(0, 15, 0, 10)
    TabBar.BackgroundTransparency = 1
    TabBar.Parent = parentPage
    
    local TabLayout = Instance.new("UIListLayout")
    TabLayout.FillDirection = Enum.FillDirection.Horizontal
    TabLayout.Padding = UDim.new(0, 8)
    TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabLayout.Parent = TabBar
    
    -- Content container
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Size = UDim2.new(1, -30, 1, -70)
    ContentContainer.Position = UDim2.new(0, 15, 0, 60)
    ContentContainer.BackgroundColor3 = GUI_SETTINGS.Surface
    ContentContainer.BackgroundTransparency = 0.3
    ContentContainer.BorderSizePixel = 0
    ContentContainer.Parent = parentPage
    
    local ContainerCorner = Instance.new("UICorner")
    ContainerCorner.CornerRadius = UDim.new(0, 10)
    ContainerCorner.Parent = ContentContainer
    
    local ContainerStroke = Instance.new("UIStroke")
    ContainerStroke.Color = Color3.fromRGB(60, 60, 80)
    ContainerStroke.Thickness = 1
    ContainerStroke.Transparency = 0.6
    ContainerStroke.Parent = ContentContainer
    
    local SubTabs = {}
    local CurrentSubTab = nil
    
    for i, tabData in ipairs(tabs) do
        -- Tab button
        local TabButton = Instance.new("TextButton")
        TabButton.Size = UDim2.new(0, 115, 1, 0) -- Increased from 105 to 115 for perfect fit
        TabButton.BackgroundColor3 = GUI_SETTINGS.TabInactive
        TabButton.Text = ""
        TabButton.BorderSizePixel = 0
        TabButton.LayoutOrder = i
        TabButton.AutoButtonColor = false
        TabButton.Parent = TabBar
        
        local TabCorner = Instance.new("UICorner")
        TabCorner.CornerRadius = UDim.new(0, 8)
        TabCorner.Parent = TabButton
        
        -- Icon
        local TabIcon = Instance.new("ImageLabel")
        TabIcon.Size = UDim2.new(0, 16, 0, 16) -- Increased back to 16
        TabIcon.Position = UDim2.new(0, 8, 0.5, -8) -- Better positioning
        TabIcon.BackgroundTransparency = 1
        TabIcon.Image = tabData.Icon
        TabIcon.ImageColor3 = GUI_SETTINGS.TextSecondary
        TabIcon.Parent = TabButton
        
        -- Text
        local TabText = Instance.new("TextLabel")
        TabText.Size = UDim2.new(1, -30, 1, 0) -- Better text area
        TabText.Position = UDim2.new(0, 28, 0, 0) -- Better positioning
        TabText.BackgroundTransparency = 1
        TabText.Text = tabData.Name
        TabText.TextColor3 = GUI_SETTINGS.TextSecondary
        TabText.TextSize = 12 -- Increased back to 12
        TabText.Font = Enum.Font.GothamBold
        TabText.TextXAlignment = Enum.TextXAlignment.Left
        TabText.TextTruncate = Enum.TextTruncate.AtEnd
        TabText.Parent = TabButton
        
        -- Indicator
        local Indicator = Instance.new("Frame")
        Indicator.Size = UDim2.new(1, -6, 0, 2)
        Indicator.Position = UDim2.new(0, 3, 1, -3)
        Indicator.BackgroundColor3 = GUI_SETTINGS.Primary
        Indicator.BorderSizePixel = 0
        Indicator.Visible = false
        Indicator.Parent = TabButton
        
        local IndicatorCorner = Instance.new("UICorner")
        IndicatorCorner.CornerRadius = UDim.new(1, 0)
        IndicatorCorner.Parent = Indicator
        
        -- Content
        local TabContent = Instance.new("ScrollingFrame")
        TabContent.Size = UDim2.new(1, -30, 1, -30)
        TabContent.Position = UDim2.new(0, 15, 0, 15)
        TabContent.BackgroundTransparency = 1
        TabContent.BorderSizePixel = 0
        TabContent.ScrollBarThickness = 4
        TabContent.ScrollBarImageColor3 = GUI_SETTINGS.Primary
        TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        TabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
        TabContent.Visible = false
        TabContent.Parent = ContentContainer
        
        local ContentLayout = Instance.new("UIListLayout")
        ContentLayout.Padding = UDim.new(0, 12)
        ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        ContentLayout.Parent = TabContent
        
        SubTabs[tabData.Name] = {
            Button = TabButton,
            Content = TabContent,
            Icon = TabIcon,
            Text = TabText,
            Indicator = Indicator
        }
        
        TabButton.MouseButton1Click:Connect(function()
            for name, tab in pairs(SubTabs) do
                TweenService:Create(tab.Button, TweenInfo.new(0.3), {BackgroundColor3 = GUI_SETTINGS.TabInactive}):Play()
                TweenService:Create(tab.Icon, TweenInfo.new(0.3), {ImageColor3 = GUI_SETTINGS.TextSecondary}):Play()
                TweenService:Create(tab.Text, TweenInfo.new(0.3), {TextColor3 = GUI_SETTINGS.TextSecondary}):Play()
                tab.Indicator.Visible = false
                tab.Content.Visible = false
            end
            
            TweenService:Create(TabButton, TweenInfo.new(0.3), {BackgroundColor3 = GUI_SETTINGS.Surface}):Play()
            TweenService:Create(TabIcon, TweenInfo.new(0.3), {ImageColor3 = GUI_SETTINGS.Primary}):Play()
            TweenService:Create(TabText, TweenInfo.new(0.3), {TextColor3 = GUI_SETTINGS.TextPrimary}):Play()
            Indicator.Visible = true
            TabContent.Visible = true
            CurrentSubTab = tabData.Name
        end)
        
        TabButton.MouseEnter:Connect(function()
            if CurrentSubTab ~= tabData.Name then
                TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.TabHover}):Play()
            end
        end)
        
        TabButton.MouseLeave:Connect(function()
            if CurrentSubTab ~= tabData.Name then
                TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = GUI_SETTINGS.TabInactive}):Play()
            end
        end)
        
        -- Set first tab as default
        if i == 1 then
            TabButton.BackgroundColor3 = GUI_SETTINGS.Surface
            TabIcon.ImageColor3 = GUI_SETTINGS.Primary
            TabText.TextColor3 = GUI_SETTINGS.TextPrimary
            Indicator.Visible = true
            TabContent.Visible = true
            CurrentSubTab = tabData.Name
        end
    end
    
    return SubTabs
end

-- Helper function for placeholder
local function CreatePlaceholder(parent, title, description)
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(1, 0, 0, 110)
    Frame.BackgroundColor3 = GUI_SETTINGS.BackgroundSecondary
    Frame.BorderSizePixel = 0
    Frame.Parent = parent
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 10)
    Corner.Parent = Frame
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = Color3.fromRGB(60, 60, 80)
    Stroke.Thickness = 1
    Stroke.Transparency = 0.6
    Stroke.Parent = Frame
    
    local IconLabel = Instance.new("TextLabel")
    IconLabel.Size = UDim2.new(0, 35, 0, 35)
    IconLabel.Position = UDim2.new(0, 15, 0, 15)
    IconLabel.BackgroundColor3 = GUI_SETTINGS.Primary
    IconLabel.Text = "ğŸ“¦"
    IconLabel.TextSize = 18
    IconLabel.BorderSizePixel = 0
    IconLabel.Parent = Frame
    
    local IconCorner = Instance.new("UICorner")
    IconCorner.CornerRadius = UDim.new(0, 8)
    IconCorner.Parent = IconLabel
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, -65, 0, 22)
    Title.Position = UDim2.new(0, 60, 0, 15)
    Title.BackgroundTransparency = 1
    Title.Text = title
    Title.TextColor3 = GUI_SETTINGS.TextPrimary
    Title.TextSize = 15
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = Frame
    
    local Desc = Instance.new("TextLabel")
    Desc.Size = UDim2.new(1, -65, 0, 55)
    Desc.Position = UDim2.new(0, 60, 0, 40)
    Desc.BackgroundTransparency = 1
    Desc.Text = description
    Desc.TextColor3 = GUI_SETTINGS.TextSecondary
    Desc.TextSize = 11
    Desc.Font = Enum.Font.Gotham
    Desc.TextXAlignment = Enum.TextXAlignment.Left
    Desc.TextYAlignment = Enum.TextYAlignment.Top
    Desc.TextWrapped = true
    Desc.Parent = Frame
    
    return Frame
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CREATE ALL MAIN PAGES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

-- Aegis Options (with sub-tabs)
local AegisPage = CreateMainMenuButton("Aegis Options", Icons.AegisOptions, 1, true)
local AegisSubTabs = CreateSubTabPage(AegisPage, {
    {Name = "ESP", Icon = Icons.ESP},
    {Name = "Hitbox", Icon = Icons.Hitbox},
    {Name = "Teleport", Icon = Icons.Teleport},
    {Name = "Spectate", Icon = Icons.Spectate}
})

-- Wastelander Options (with sub-tabs)
local WastelanderPage = CreateMainMenuButton("Wastelander Options", Icons.WastelanderOptions, 2, true)
local WastelanderSubTabs = CreateSubTabPage(WastelanderPage, {
    {Name = "ESP", Icon = Icons.ESP},
    {Name = "Hitbox", Icon = Icons.Hitbox},
    {Name = "Teleport", Icon = Icons.Teleport},
    {Name = "Spectate", Icon = Icons.Spectate}
})

-- Other main pages (simple pages without sub-tabs)
local PlayerModPage = CreateMainMenuButton("Player Mod", Icons.PlayerMod, 3)
local WorldModPage = CreateMainMenuButton("World Mod", Icons.WorldMod, 4)
local AutoCollectPage = CreateMainMenuButton("Auto Collect", Icons.AutoCollect, 5)
local TeleportsPage = CreateMainMenuButton("World Teleports", Icons.WorldTeleports, 6)
local TrollingPage = CreateMainMenuButton("Trolling", Icons.Trolling, 7)
local UtilityPage = CreateMainMenuButton("Utility", Icons.Utility, 8)

-- Set Aegis Options as default page
MainPages["Aegis Options"].Button.BackgroundColor3 = GUI_SETTINGS.Surface
MainPages["Aegis Options"].Icon.ImageColor3 = GUI_SETTINGS.Primary
MainPages["Aegis Options"].Text.TextColor3 = GUI_SETTINGS.TextPrimary
MainPages["Aegis Options"].Page.Visible = true
CurrentPage = "Aegis Options"

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GLOBAL ACCESS (Setup BEFORE loadstrings!)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

_G.AegisHub = {
    -- Aegis Sub-Tabs
    AegisESP = AegisSubTabs["ESP"].Content,
    AegisHitbox = AegisSubTabs["Hitbox"].Content,
    AegisTeleport = AegisSubTabs["Teleport"].Content,
    AegisSpectate = AegisSubTabs["Spectate"].Content,
    
    -- Wastelander Sub-Tabs
    WastelanderESP = WastelanderSubTabs["ESP"].Content,
    WastelanderHitbox = WastelanderSubTabs["Hitbox"].Content,
    WastelanderTeleport = WastelanderSubTabs["Teleport"].Content,
    WastelanderSpectate = WastelanderSubTabs["Spectate"].Content,
    
    -- Main Pages
    PlayerModPage = PlayerModPage,
    WorldModPage = WorldModPage,
    AutoCollectPage = AutoCollectPage,
    TeleportsPage = TeleportsPage,
    TrollingPage = TrollingPage,
    UtilityPage = UtilityPage,
    
    -- GUI Elements
    MainFrame = MainFrame,
    ScreenGui = ScreenGui,
    
    -- Toggle Function (Minimize/Expand)
    Toggle = function()
        isMinimized = not isMinimized
        
        if isMinimized then
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = minimizedSize
            }):Play()
            Sidebar.Visible = false
            ContentArea.Visible = false
            Divider.Visible = false
            TitleFix.Visible = false
        else
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = originalSize
            }):Play()
            Sidebar.Visible = true
            ContentArea.Visible = true
            Divider.Visible = true
            TitleFix.Visible = true
        end
    end,
    
    -- Close Function (Destroy GUI)
    Close = function()
        TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 0, 0, 0)
        }):Play()
        task.wait(0.3)
        ScreenGui:Destroy()
        _G.AegisHub = nil
        print("[CoreX] GUI closed and destroyed")
    end
}

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    LOADSTRING INSERTION POINTS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                AEGIS OPTIONS - ESP TAB                    â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    -- Load ESP script to create controls directly in the tab
    local success, espModule = pcall(function()
        return loadstring(game:HttpGet("https://raw.githubusercontent.com/gamedev1164/hhkalskjdfg/refs/heads/main/1/Aegis%20Options%20ESP"))()
    end)
    
    if success and espModule then
        -- The ESP module should have created its controls in the tab
        print("[CoreX] Aegis ESP loaded successfully!")
    else
        -- If loading failed, show error placeholder
        CreatePlaceholder(AegisSubTabs["ESP"].Content, "ESP Module - Failed to Load",
            "Error loading ESP from GitHub. Check console for details.")
        warn("[CoreX] Failed to load Aegis ESP:", espModule)
    end
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘              AEGIS OPTIONS - HITBOX TAB                   â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(AegisSubTabs["Hitbox"].Content, "Hitbox Expander",
        "Insert your Hitbox Expander loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘             AEGIS OPTIONS - TELEPORT TAB                  â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(AegisSubTabs["Teleport"].Content, "Teleport Module",
        "Insert your Teleport to Player loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘             AEGIS OPTIONS - SPECTATE TAB                  â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(AegisSubTabs["Spectate"].Content, "Spectate Module",
        "Insert your Spectate Player loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘            WASTELANDER OPTIONS - ESP TAB                  â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(WastelanderSubTabs["ESP"].Content, "Wastelander ESP Module",
        "Insert your Wastelander ESP loadstring here to track Wastelander team members.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘          WASTELANDER OPTIONS - HITBOX TAB                 â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(WastelanderSubTabs["Hitbox"].Content, "Wastelander Hitbox Expander",
        "Insert your Wastelander Hitbox Expander loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘         WASTELANDER OPTIONS - TELEPORT TAB                â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(WastelanderSubTabs["Teleport"].Content, "Wastelander Teleport Module",
        "Insert your Wastelander Teleport to Player loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘         WASTELANDER OPTIONS - SPECTATE TAB                â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(WastelanderSubTabs["Spectate"].Content, "Wastelander Spectate Module",
        "Insert your Wastelander Spectate Player loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                  PLAYER MOD PAGE                          â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(PlayerModPage, "Player Modifications",
        "Insert your Player Mod loadstring here (Speed, Jump, etc).")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                  WORLD MOD PAGE                           â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(WorldModPage, "World Modifications",
        "Insert your World Mod loadstring here (FOV, Lighting, etc).")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                 AUTO COLLECT PAGE                         â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(AutoCollectPage, "Auto Collect",
        "Insert your Auto Collect loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘               WORLD TELEPORTS PAGE                        â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(TeleportsPage, "World Teleports",
        "Insert your World Teleports loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                   TROLLING PAGE                           â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(TrollingPage, "Trolling Features",
        "Insert your Trolling loadstring here.")
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                   UTILITY PAGE                            â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
do
    CreatePlaceholder(UtilityPage, "Utility Features",
        "Insert your Utility loadstring here.")
end

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CAPSLOCK KEYBIND - Toggle Minimize
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.CapsLock then
        isMinimized = not isMinimized
        
        if isMinimized then
            -- Minimize
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = minimizedSize
            }):Play()
            Sidebar.Visible = false
            ContentArea.Visible = false
            Divider.Visible = false
            TitleFix.Visible = false
        else
            -- Expand
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = originalSize
            }):Play()
            Sidebar.Visible = true
            ContentArea.Visible = true
            Divider.Visible = true
            TitleFix.Visible = true
        end
    end
end)

--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    DRAGGABLE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)


print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("COREX - LOADED SUCCESSFULLY")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ¨ Modern dark theme with transparency")
print("âŒ¨ï¸  CAPSLOCK to minimize | âˆ’ button to minimize | Ã— to close")
print("")
print("ğŸ“‚ Main Tabs:")
print("  â€¢ Aegis Options (ESP, Hitbox, Teleport, Spectate)")
print("  â€¢ Wastelander Options (ESP, Hitbox, Teleport, Spectate)")
print("  â€¢ Player Mod")
print("  â€¢ World Mod")
print("  â€¢ Auto Collect")
print("  â€¢ World Teleports")
print("  â€¢ Trolling")
print("  â€¢ Utility")
print("")
print("Functions:")
print("  _G.AegisHub.Toggle() - Minimize/expand GUI")
print("  _G.AegisHub.Close() - Destroy GUI completely")
print("Access tabs: _G.AegisHub.AegisESP, etc.")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
