--[[
    ═══════════════════════════════════════════════════════════
       CORE X / NAVY SIMULATOR HUB - v1.0 (Light Blue)
       Converted for Navy Simulator (6068707488)
       Clean GUI - No Tabs
    ═══════════════════════════════════════════════════════════
]]

--// 1. SECURITY SCOPE
do
    local RunService = game:GetService("RunService")
    local TargetGameId = 6068707488 -- NAVY SIMULATOR

    --// SECURITY CHECK
    if game.PlaceId ~= TargetGameId or RunService:IsStudio() then
        warn("Wrong game! This is for Navy Simulator only.")
        warn("Current game ID: " .. game.PlaceId)
        warn("Required game ID: " .. TargetGameId)
        return
    end

    --// PRE-LOAD CLEANUP
    if _G.NavyHub and _G.NavyHub.Close then
        pcall(_G.NavyHub.Close)
    end

    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local UserInputService = game:GetService("UserInputService")
    local CoreGui = game:GetService("CoreGui")
    local SoundService = game:GetService("SoundService")
    local HttpService = game:GetService("HttpService")
    local StatsService = game:GetService("Stats")
    local Camera = workspace.CurrentCamera

    --// CONFIGURATION
    local Config = {
        Name = "NavyX",
        Version = "1.0",
        ToggleKey = Enum.KeyCode.CapsLock,
        ReferenceRes = Vector2.new(1920, 1080)
    } 

    local Theme = {
        Main = Color3.fromRGB(18, 18, 22), 
        Sidebar = Color3.fromRGB(23, 23, 29),
        Content = Color3.fromRGB(28, 28, 34),
        ElementBg = Color3.fromRGB(34, 34, 40),
        Accent = Color3.fromRGB(0, 191, 255), -- Light Blue
        TextWhite = Color3.fromRGB(240, 240, 240),
        TextGray = Color3.fromRGB(160, 160, 170),
        TextDark = Color3.fromRGB(110, 110, 120),
        Stroke = Color3.fromRGB(55, 55, 65)
    }

    --// SOUND SYSTEM
    local Sounds = {
        Load = "rbxassetid://8551380848",
        Notify = "rbxassetid://8551372796",
        Click = "rbxassetid://17779566040"
    }

    local function PlaySound(id)
        task.spawn(function()
            local s = Instance.new("Sound")
            s.SoundId = id
            s.Volume = 0.5
            s.Parent = SoundService
            s:Play()
            s.Ended:Wait()
            s:Destroy()
        end)
    end

    --// UI LIBRARY
    local Library = {}
    Library.GUI = nil
    Library.Root = nil
    Library.ScaleNode = nil
    Library.OpenBtn = nil
    Library.Minimized = false
    Library.FirstClose = true
    Library.CloseConfirming = false
    
    function Library:UpdateScale()
        if not Library.GUI then return end
        local scaler = Library.GUI:FindFirstChild("MainScaler")
        if not scaler then return end
        local viewport = Camera.ViewportSize
        local scale = viewport.Y / Config.ReferenceRes.Y
        scale = math.clamp(scale, 0.5, 1.5)
        scaler.Scale = scale
    end

    function Library:Destroy()
        if Library.GUI then Library.GUI:Destroy() end
        _G.NavyHub = nil
    end

    function Library:Init()
        local gui = Instance.new("ScreenGui")
        gui.Name = "NavyX_UI_v1.0"
        gui.ResetOnSpawn = false
        gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        
        if gethui then gui.Parent = gethui()
        elseif syn and syn.protect_gui then syn.protect_gui(gui) gui.Parent = CoreGui
        else gui.Parent = CoreGui end
        Library.GUI = gui
        
        local scaler = Instance.new("UIScale")
        scaler.Name = "MainScaler"
        scaler.Parent = gui
        
        Camera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
            Library:UpdateScale()
        end)
        Library:UpdateScale()

        self:PlayLoadingSequence()
    end

    function Library:PlayLoadingSequence()
        local loadFrame = Instance.new("Frame")
        loadFrame.Name = "LoadingWindow"
        loadFrame.Size = UDim2.new(0, 400, 0, 220)
        loadFrame.Position = UDim2.new(0.5, -200, 0.5, -110)
        loadFrame.BackgroundColor3 = Theme.Main
        loadFrame.BorderSizePixel = 0
        loadFrame.ZIndex = 2000
        loadFrame.Parent = Library.GUI
        
        Instance.new("UICorner", loadFrame).CornerRadius = UDim.new(0, 16)
        local lStroke = Instance.new("UIStroke")
        lStroke.Color = Theme.Stroke
        lStroke.Thickness = 1
        lStroke.Parent = loadFrame
        
        local content = Instance.new("Frame")
        content.Size = UDim2.new(1, 0, 1, 0)
        content.BackgroundTransparency = 1
        content.Parent = loadFrame

        local title = Instance.new("TextLabel")
        title.Text = "NAVY<font color=\"rgb(0,191,255)\">X</font>"
        title.RichText = true
        title.Font = Enum.Font.GothamBlack
        title.TextSize = 40
        title.TextColor3 = Theme.TextWhite
        title.Size = UDim2.new(1, 0, 0, 50)
        title.Position = UDim2.new(0, 0, 0.2, 0)
        title.BackgroundTransparency = 1
        title.TextTransparency = 1
        title.Parent = content
        
        local tipLabel = Instance.new("TextLabel")
        tipLabel.Text = "⚓ Loading Navy Simulator Hub..."
        tipLabel.Font = Enum.Font.GothamMedium
        tipLabel.TextSize = 13
        tipLabel.TextColor3 = Theme.TextGray
        tipLabel.Size = UDim2.new(0.9, 0, 0, 40)
        tipLabel.Position = UDim2.new(0.05, 0, 0.8, 0)
        tipLabel.BackgroundTransparency = 1
        tipLabel.TextTransparency = 1
        tipLabel.TextWrapped = true
        tipLabel.Parent = content

        local barBg = Instance.new("Frame")
        barBg.Size = UDim2.new(0, 260, 0, 4)
        barBg.Position = UDim2.new(0.5, -130, 0.55, 0)
        barBg.BackgroundColor3 = Theme.ElementBg
        barBg.BorderSizePixel = 0
        barBg.BackgroundTransparency = 1
        barBg.Parent = content
        Instance.new("UICorner", barBg).CornerRadius = UDim.new(1, 0)
        
        local barFill = Instance.new("Frame")
        barFill.Size = UDim2.new(0, 0, 1, 0)
        barFill.BackgroundColor3 = Theme.Accent
        barFill.BorderSizePixel = 0
        barFill.Parent = barBg
        Instance.new("UICorner", barFill).CornerRadius = UDim.new(1, 0)

        TweenService:Create(title, TweenInfo.new(0.8, Enum.EasingStyle.Quint), {TextTransparency = 0}):Play()
        task.wait(0.3)
        TweenService:Create(barBg, TweenInfo.new(0.5), {BackgroundTransparency = 0}):Play()
        TweenService:Create(tipLabel, TweenInfo.new(0.5), {TextTransparency = 0}):Play()

        TweenService:Create(barFill, TweenInfo.new(3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2.new(1, 0, 1, 0)}):Play()
        task.wait(3.0) 

        TweenService:Create(title, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
        TweenService:Create(tipLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
        TweenService:Create(barBg, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
        TweenService:Create(barFill, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
        task.wait(0.3)
        content:Destroy()

        Library:BuildInterface(true) 
        
        local tweenInfo = TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
        local inflate = TweenService:Create(loadFrame, tweenInfo, {
            Size = UDim2.new(0, 900, 0, 550), 
            Position = UDim2.new(0.5, -450, 0.5, -275)
        })
        inflate:Play()
        PlaySound(Sounds.Load)
        inflate.Completed:Wait()
        
        Library.Root.Visible = true
        loadFrame:Destroy()
    end

    function Library:BuildInterface(skipAnimation)
        --// RESTORE BUTTON
        local openBtn = Instance.new("TextButton")
        openBtn.Name = "Restore"
        openBtn.Size = UDim2.new(0, 140, 0, 45)
        openBtn.Position = UDim2.new(0, 25, 1, -70)
        openBtn.BackgroundColor3 = Theme.Main
        openBtn.BackgroundTransparency = 0.1
        openBtn.Text = ""
        openBtn.Visible = false
        openBtn.AutoButtonColor = false
        openBtn.Parent = Library.GUI
        
        Instance.new("UICorner", openBtn).CornerRadius = UDim.new(0, 12)
        local obStroke = Instance.new("UIStroke")
        obStroke.Color = Theme.Accent
        obStroke.Thickness = 1.5
        obStroke.Parent = openBtn
        
        local obText = Instance.new("TextLabel")
        obText.Size = UDim2.new(1, 0, 1, 0)
        obText.BackgroundTransparency = 1
        obText.Text = "NavyX [CAPS]"
        obText.Font = Enum.Font.GothamBold
        obText.TextColor3 = Theme.TextWhite
        obText.TextSize = 14
        obText.Parent = openBtn
        
        openBtn.MouseButton1Click:Connect(function() Library:Toggle() end)
        Library.OpenBtn = openBtn

        --// ROOT CONTAINER
        local root = Instance.new("Frame")
        root.Name = "RootContainer"
        root.Size = UDim2.new(0, 900, 0, 550) 
        root.Position = UDim2.new(0.5, -450, 0.5, -275)
        root.BackgroundTransparency = 1
        root.Parent = Library.GUI
        Library.Root = root
        
        local rootScale = Instance.new("UIScale")
        rootScale.Scale = skipAnimation and 1 or 0
        rootScale.Parent = root
        Library.ScaleNode = rootScale

        if skipAnimation then
            root.Visible = false 
        else
            root.Visible = true
        end

        --// MAIN CANVAS
        local canvas = Instance.new("Frame")
        canvas.Name = "MainCanvas"
        canvas.Size = UDim2.new(1, 0, 1, 0)
        canvas.BackgroundColor3 = Theme.Main
        canvas.BorderSizePixel = 0
        canvas.Parent = root
        
        local mCorner = Instance.new("UICorner")
        mCorner.CornerRadius = UDim.new(0, 16)
        mCorner.Parent = canvas
        
        local mStroke = Instance.new("UIStroke")
        mStroke.Color = Theme.Stroke
        mStroke.Thickness = 1
        mStroke.Parent = canvas

        --// SIDEBAR
        local sidebar = Instance.new("Frame")
        sidebar.Name = "Sidebar"
        sidebar.Size = UDim2.new(0, 230, 1, 0) 
        sidebar.Position = UDim2.new(0, 0, 0, 0)
        sidebar.BackgroundColor3 = Theme.Sidebar
        sidebar.BorderSizePixel = 0
        sidebar.ZIndex = 2
        sidebar.Parent = canvas
        
        Instance.new("UICorner", sidebar).CornerRadius = UDim.new(0, 16)
        
        local sbPatch = Instance.new("Frame")
        sbPatch.Name = "Patch"
        sbPatch.BackgroundColor3 = Theme.Sidebar
        sbPatch.BorderSizePixel = 0
        sbPatch.Size = UDim2.new(0, 20, 1, 0)
        sbPatch.Position = UDim2.new(1, -20, 0, 0)
        sbPatch.ZIndex = 2
        sbPatch.Parent = sidebar

        --// CONTENT AREA
        local content = Instance.new("Frame")
        content.Name = "Content"
        content.Size = UDim2.new(1, -230, 1, 0)
        content.Position = UDim2.new(0, 230, 0, 0)
        content.BackgroundColor3 = Theme.Content
        content.BorderSizePixel = 0
        content.ZIndex = 2
        content.Parent = canvas
        
        Instance.new("UICorner", content).CornerRadius = UDim.new(0, 16)
        
        local cPatch = Instance.new("Frame")
        cPatch.Name = "Patch"
        cPatch.BackgroundColor3 = Theme.Content
        cPatch.BorderSizePixel = 0
        cPatch.Size = UDim2.new(0, 20, 1, 0)
        cPatch.Position = UDim2.new(0, 0, 0, 0)
        cPatch.ZIndex = 2
        cPatch.Parent = content

        --// DRAG HANDLE
        local dragFrame = Instance.new("Frame")
        dragFrame.Name = "DragHandler"
        dragFrame.Size = UDim2.new(1, 0, 0, 50)
        dragFrame.BackgroundTransparency = 1
        dragFrame.ZIndex = 100 
        dragFrame.Parent = root

        --// SIDEBAR ITEMS
        local title = Instance.new("TextLabel")
        title.Text = Config.Name .. " <font color=\"rgb(0,191,255)\">//</font> " .. Config.Version
        title.RichText = true
        title.Font = Enum.Font.GothamBold
        title.TextSize = 22
        title.TextColor3 = Theme.TextWhite
        title.Size = UDim2.new(1, -40, 0, 60)
        title.Position = UDim2.new(0, 20, 0, 0)
        title.BackgroundTransparency = 1
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.ZIndex = 3
        title.Parent = sidebar

        --// EMPTY MESSAGE IN SIDEBAR
        local emptyMsg = Instance.new("TextLabel")
        emptyMsg.Text = "No tabs yet.\nAdd your scripts here!"
        emptyMsg.Font = Enum.Font.GothamMedium
        emptyMsg.TextSize = 14
        emptyMsg.TextColor3 = Theme.TextGray
        emptyMsg.Size = UDim2.new(1, -40, 0, 60)
        emptyMsg.Position = UDim2.new(0, 20, 0, 150)
        emptyMsg.BackgroundTransparency = 1
        emptyMsg.TextXAlignment = Enum.TextXAlignment.Left
        emptyMsg.ZIndex = 3
        emptyMsg.Parent = sidebar

        --// POSITION DISPLAY
        local posFrame = Instance.new("Frame")
        posFrame.Size = UDim2.new(1, -40, 0, 30)
        posFrame.Position = UDim2.new(0, 20, 1, -80)
        posFrame.BackgroundColor3 = Theme.ElementBg
        posFrame.ZIndex = 3
        posFrame.Parent = sidebar
        Instance.new("UICorner", posFrame).CornerRadius = UDim.new(0, 6)
        
        local posLabel = Instance.new("TextLabel")
        posLabel.Size = UDim2.new(1, 0, 1, 0)
        posLabel.BackgroundTransparency = 1
        posLabel.TextColor3 = Theme.Accent
        posLabel.Font = Enum.Font.GothamBold
        posLabel.TextSize = 11
        posLabel.ZIndex = 4
        posLabel.Parent = posFrame

        --// STATS COUNTER
        local statsFrame = Instance.new("Frame")
        statsFrame.Size = UDim2.new(1, -40, 0, 30)
        statsFrame.Position = UDim2.new(0, 20, 1, -40)
        statsFrame.BackgroundColor3 = Theme.ElementBg
        statsFrame.ZIndex = 3
        statsFrame.Parent = sidebar
        Instance.new("UICorner", statsFrame).CornerRadius = UDim.new(0, 6)
        
        local statsLabel = Instance.new("TextLabel")
        statsLabel.Size = UDim2.new(1, 0, 1, 0)
        statsLabel.BackgroundTransparency = 1
        statsLabel.TextColor3 = Theme.Accent
        statsLabel.Font = Enum.Font.GothamBold
        statsLabel.TextSize = 11
        statsLabel.ZIndex = 4
        statsLabel.Parent = statsFrame
        
        task.spawn(function()
            while Library.GUI do
                local ping = math.floor(StatsService.Network.ServerStatsItem["Data Ping"]:GetValue())
                local fps = math.floor(1 / RunService.RenderStepped:Wait())
                
                local player = Players.LocalPlayer
                local pos = "N/A"
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local hrp = player.Character.HumanoidRootPart
                    pos = string.format("%.0f, %.0f, %.0f", hrp.Position.X, hrp.Position.Y, hrp.Position.Z)
                end
                
                posLabel.Text = string.format("POS: %s", pos)
                statsLabel.Text = string.format("FPS: %d  |  PING: %dms", fps, ping)
                task.wait(0.5)
            end
        end)

        --// CONTROLS
        local controls = Instance.new("Frame")
        controls.Size = UDim2.new(1, 0, 0, 40)
        controls.BackgroundTransparency = 1
        controls.ZIndex = 101
        controls.Parent = content
        
        local function CreateCtrl(txt, color, xOff)
            local btn = Instance.new("TextButton")
            btn.Text = txt
            btn.TextColor3 = Theme.TextGray
            btn.Font = Enum.Font.GothamBold
            btn.TextSize = 20
            btn.BackgroundTransparency = 1
            btn.Size = UDim2.new(0, 40, 1, 0)
            btn.Position = UDim2.new(1, xOff, 0, 0)
            btn.ZIndex = 102
            btn.Parent = controls
            btn.MouseEnter:Connect(function() TweenService:Create(btn, TweenInfo.new(0.15), {TextColor3 = color}):Play() end)
            btn.MouseLeave:Connect(function() TweenService:Create(btn, TweenInfo.new(0.15), {TextColor3 = Theme.TextGray}):Play() end)
            return btn
        end
        
        local minBtn = CreateCtrl("−", Theme.TextWhite, -80)
        minBtn.MouseButton1Click:Connect(function() Library:Toggle() end)
        
        local closeBtn = CreateCtrl("×", Color3.fromRGB(255, 80, 80), -40)
        closeBtn.MouseButton1Click:Connect(function()
            if not Library.CloseConfirming then
                Library.CloseConfirming = true
                closeBtn.Text = "?"
                TweenService:Create(closeBtn, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 80, 80)}):Play()
                Library:Notify("Exit?", "Press again to fully close.")
                task.delay(3, function()
                    if Library.CloseConfirming then
                        Library.CloseConfirming = false
                        closeBtn.Text = "×"
                        closeBtn.TextColor3 = Theme.TextGray
                    end
                end)
            else
                Library:Destroy()
            end
        end)
        
        Library.Content = content
        
        --// WELCOME MESSAGE IN CONTENT
        local welcomeFrame = Instance.new("Frame")
        welcomeFrame.Size = UDim2.new(1, -40, 1, -60)
        welcomeFrame.Position = UDim2.new(0, 20, 0, 50)
        welcomeFrame.BackgroundTransparency = 1
        welcomeFrame.ZIndex = 3
        welcomeFrame.Parent = content
        
        local welcomeText = Instance.new("TextLabel")
        welcomeText.Text = "⚓ Navy Simulator Hub Ready!\n\nAdd your tabs and scripts here.\nPress CAPS LOCK to toggle."
        welcomeText.Font = Enum.Font.GothamBold
        welcomeText.TextSize = 18
        welcomeText.TextColor3 = Theme.Accent
        welcomeText.Size = UDim2.new(1, 0, 0, 100)
        welcomeText.Position = UDim2.new(0, 0, 0.4, -50)
        welcomeText.BackgroundTransparency = 1
        welcomeText.ZIndex = 4
        welcomeText.Parent = welcomeFrame
        
        --// DRAG LOGIC
        local dragging, dragInput, dragStart, startPos
        dragFrame.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true; dragStart = input.Position; startPos = root.Position
                input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
            end
        end)
        dragFrame.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end end)
        UserInputService.InputChanged:Connect(function(input)
            if input == dragInput and dragging then
                local delta = input.Position - dragStart
                TweenService:Create(root, TweenInfo.new(0.05, Enum.EasingStyle.Sine), {
                    Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
                }):Play()
            end
        end)

        if not skipAnimation then
            TweenService:Create(rootScale, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Scale = 1}):Play()
            PlaySound(Sounds.Load)
        end
        
        -- SET UP NAVY HUB GLOBAL
        _G.NavyHub = {
            Content = content,
            Close = function() Library:Destroy() end,
            Toggle = function() Library:Toggle() end,
            Library = Library
        }
    end

    function Library:CreateToggle(parent, text, default, callback)
        local toggle = Instance.new("Frame")
        toggle.Name = "Toggle"
        toggle.Size = UDim2.new(1, 0, 0, 45)
        toggle.BackgroundColor3 = Theme.ElementBg
        toggle.BorderSizePixel = 0
        toggle.ZIndex = 3
        toggle.Parent = parent
        
        Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 8)
        
        local label = Instance.new("TextLabel")
        label.Text = text
        label.Font = Enum.Font.GothamMedium
        label.TextSize = 14
        label.TextColor3 = Theme.TextWhite
        label.Size = UDim2.new(1, -60, 1, 0)
        label.Position = UDim2.new(0, 15, 0, 0)
        label.BackgroundTransparency = 1
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.ZIndex = 4
        label.Parent = toggle
        
        local switch = Instance.new("TextButton")
        switch.Text = ""
        switch.Size = UDim2.new(0, 50, 0, 26)
        switch.Position = UDim2.new(1, -65, 0.5, -13)
        switch.BackgroundColor3 = default and Theme.Accent or Color3.fromRGB(50, 50, 60)
        switch.AutoButtonColor = false
        switch.ZIndex = 4
        switch.Parent = toggle
        
        Instance.new("UICorner", switch).CornerRadius = UDim.new(1, 0)
        
        local dot = Instance.new("Frame")
        dot.Size = UDim2.new(0, 20, 0, 20)
        dot.Position = default and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        dot.BackgroundColor3 = Theme.TextWhite
        dot.BorderSizePixel = 0
        dot.ZIndex = 5
        dot.Parent = switch
        
        Instance.new("UICorner", dot).CornerRadius = UDim.new(1, 0)
        
        local state = default
        switch.MouseButton1Click:Connect(function()
            state = not state
            PlaySound(Sounds.Click)
            TweenService:Create(switch, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {BackgroundColor3 = state and Theme.Accent or Color3.fromRGB(50, 50, 60)}):Play()
            TweenService:Create(dot, TweenInfo.new(0.2, Enum.EasingStyle.Sine), {
                Position = state and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
            }):Play()
            if callback then callback(state) end
        end)
        return toggle
    end

    function Library:CreateSlider(parent, text, min, max, default, callback)
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Name = "Slider"
        sliderFrame.Size = UDim2.new(1, 0, 0, 60)
        sliderFrame.BackgroundColor3 = Theme.ElementBg
        sliderFrame.BorderSizePixel = 0
        sliderFrame.ZIndex = 3
        sliderFrame.Parent = parent
        
        Instance.new("UICorner", sliderFrame).CornerRadius = UDim.new(0, 8)
        
        local label = Instance.new("TextLabel")
        label.Text = text
        label.Font = Enum.Font.GothamMedium
        label.TextSize = 14
        label.TextColor3 = Theme.TextWhite
        label.Size = UDim2.new(1, -15, 0, 30)
        label.Position = UDim2.new(0, 15, 0, 0)
        label.BackgroundTransparency = 1
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.ZIndex = 4
        label.Parent = sliderFrame
        
        local valueLabel = Instance.new("TextLabel")
        valueLabel.Text = tostring(default)
        valueLabel.Font = Enum.Font.GothamBold
        valueLabel.TextSize = 14
        valueLabel.TextColor3 = Theme.Accent
        valueLabel.Size = UDim2.new(0, 50, 0, 30)
        valueLabel.Position = UDim2.new(1, -65, 0, 0)
        valueLabel.BackgroundTransparency = 1
        valueLabel.TextXAlignment = Enum.TextXAlignment.Right
        valueLabel.ZIndex = 4
        valueLabel.Parent = sliderFrame
        
        local barBg = Instance.new("Frame")
        barBg.Size = UDim2.new(0, 200, 0, 12)
        barBg.Position = UDim2.new(0, 15, 0, 35)
        barBg.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
        barBg.BorderSizePixel = 0
        barBg.ZIndex = 4
        barBg.Parent = sliderFrame
        Instance.new("UICorner", barBg).CornerRadius = UDim.new(1, 0)
        
        local fill = Instance.new("Frame")
        fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
        fill.BackgroundColor3 = Theme.Accent
        fill.BorderSizePixel = 0
        fill.ZIndex = 5
        fill.Parent = barBg
        Instance.new("UICorner", fill).CornerRadius = UDim.new(1, 0)
        
        local grabber = Instance.new("Frame")
        grabber.Size = UDim2.new(0, 18, 0, 18)
        grabber.AnchorPoint = Vector2.new(0.5, 0.5)
        grabber.Position = UDim2.new(1, 0, 0.5, 0)
        grabber.BackgroundColor3 = Theme.TextWhite
        grabber.ZIndex = 6
        grabber.Parent = fill
        Instance.new("UICorner", grabber).CornerRadius = UDim.new(1, 0)
        
        local dragging = false
        local function Update(input)
            local sizeX = barBg.AbsoluteSize.X
            local pos = math.clamp((input.Position.X - barBg.AbsolutePosition.X) / sizeX, 0, 1)
            local value = math.floor(min + ((max - min) * pos))
            fill.Size = UDim2.new(pos, 0, 1, 0)
            valueLabel.Text = tostring(value)
            if callback then callback(value) end
        end
        
        local function startDragging(input)
            dragging = true
            Update(input)
            TweenService:Create(grabber, TweenInfo.new(0.15), {Size = UDim2.new(0, 18, 0, 18)}):Play()
        end
        
        barBg.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                startDragging(input)
            end
        end)
        
        fill.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                startDragging(input)
            end
        end)
        
        grabber.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                TweenService:Create(grabber, TweenInfo.new(0.15), {Size = UDim2.new(0, 18, 0, 18)}):Play()
            end
        end)
        
        UserInputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
                TweenService:Create(grabber, TweenInfo.new(0.15), {Size = UDim2.new(0, 14, 0, 14)}):Play()
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then Update(input) end
        end)
        return sliderFrame
    end

    function Library:Toggle()
        Library.Minimized = not Library.Minimized
        if Library.Minimized then
            Library.Root.Visible = false
            Library.OpenBtn.Visible = true
            Library.OpenBtn.Size = UDim2.new(0, 0, 0, 45)
            TweenService:Create(Library.OpenBtn, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {Size=UDim2.new(0,140,0,45)}):Play()
            if Library.FirstClose then
                Library:ShowFirstTimeHint()
                Library.FirstClose = false
            end
        else
            Library.OpenBtn.Visible = false
            Library.Root.Visible = true
            TweenService:Create(Library.ScaleNode, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Scale = 1}):Play()
        end
    end

    function Library:Notify(title, msg)
        PlaySound(Sounds.Notify)
        local notif = Instance.new("Frame")
        notif.Size = UDim2.new(0, 260, 0, 70)
        notif.Position = UDim2.new(1, 10, 0.85, 0) 
        notif.BackgroundColor3 = Theme.Main
        notif.BorderSizePixel = 0
        notif.Parent = Library.GUI
        Instance.new("UICorner", notif).CornerRadius = UDim.new(0, 8)
        local stroke = Instance.new("UIStroke")
        stroke.Color = Theme.Accent
        stroke.Thickness = 1.5
        stroke.Parent = notif
        
        local tLabel = Instance.new("TextLabel")
        tLabel.Text = title
        tLabel.Font = Enum.Font.GothamBold
        tLabel.TextSize = 14
        tLabel.TextColor3 = Theme.TextWhite
        tLabel.BackgroundTransparency = 1
        tLabel.Position = UDim2.new(0, 15, 0, 10)
        tLabel.Size = UDim2.new(1, -20, 0, 20)
        tLabel.TextXAlignment = Enum.TextXAlignment.Left
        tLabel.Parent = notif
        
        local mLabel = Instance.new("TextLabel")
        mLabel.Text = msg
        mLabel.Font = Enum.Font.Gotham
        mLabel.TextSize = 12
        mLabel.TextColor3 = Theme.TextGray
        mLabel.BackgroundTransparency = 1
        mLabel.Position = UDim2.new(0, 15, 0, 35)
        mLabel.Size = UDim2.new(1, -20, 0, 20)
        mLabel.TextXAlignment = Enum.TextXAlignment.Left
        mLabel.TextWrapped = true
        mLabel.Parent = notif
        
        TweenService:Create(notif, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Position = UDim2.new(1, -280, 0.85, 0)}):Play()
        task.delay(3, function()
            TweenService:Create(notif, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Position = UDim2.new(1, 10, 0.85, 0)}):Play()
            task.wait(0.5)
            notif:Destroy()
        end)
    end

    function Library:ShowFirstTimeHint()
        local hint = Instance.new("Frame")
        hint.Size = UDim2.new(0, 220, 0, 60)
        hint.Position = UDim2.new(0, 25, 1, -145)
        hint.BackgroundColor3 = Theme.Sidebar
        hint.Parent = Library.GUI
        Instance.new("UICorner", hint).CornerRadius = UDim.new(0, 10)
        Instance.new("UIStroke", hint).Color = Theme.Accent
        
        local txt = Instance.new("TextLabel")
        txt.Text = "Minimized.\nClick below or press CAPS."
        txt.TextColor3 = Theme.TextWhite
        txt.BackgroundTransparency = 1
        txt.Size = UDim2.new(1,0,1,0)
        txt.Font = Enum.Font.GothamMedium
        txt.TextSize = 13
        txt.Parent = hint
        
        task.delay(5, function() hint:Destroy() end)
    end

    UserInputService.InputBegan:Connect(function(input, gp)
        if not gp and input.KeyCode == Config.ToggleKey then Library:Toggle() end
    end)

    Library:Init()
    
    print("\n⚓ NavyX Hub loaded for Navy Simulator!")
    print("   Light Blue Theme")
    print("   Press CAPS LOCK to toggle GUI")
    print("   Ready to add your scripts!\n")
end
